<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · Configurations.jl</title><script data-outdated-warner src="assets/warner.js"></script><link rel="canonical" href="https://Roger-luo.github.io/Configurations.jl/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="assets/indigo.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>Configurations.jl</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#Usage"><span>Usage</span></a></li><li><a class="tocitem" href="#Frequently-Asked-Questions"><span>Frequently Asked Questions</span></a></li><li><a class="tocitem" href="#License"><span>License</span></a></li></ul></li><li><a class="tocitem" href="quick-start/">Quick Start</a></li><li><a class="tocitem" href="convert/">Type Conversion</a></li><li><a class="tocitem" href="advance/">Advanced Usage</a></li><li><a class="tocitem" href="ref/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Roger-luo/Configurations.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Configurations"><a class="docs-heading-anchor" href="#Configurations">Configurations</a><a id="Configurations-1"></a><a class="docs-heading-anchor-permalink" href="#Configurations" title="Permalink"></a></h1><p><a href="https://github.com/Roger-luo/Configurations.jl/actions"><img src="https://github.com/Roger-luo/Configurations.jl/workflows/CI/badge.svg" alt="CI"/></a> <a href="https://codecov.io/gh/Roger-luo/Configurations.jl"><img src="https://codecov.io/gh/Roger-luo/Configurations.jl/branch/master/graph/badge.svg?token=U604BQGRV1" alt="codecov"/></a></p><p>Configurations &amp; Options made easy.</p><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><p>
Configurations is a &nbsp;
    <a href="https://julialang.org">
        <img src="https://raw.githubusercontent.com/JuliaLang/julia-logo-graphics/master/images/julia.ico" width="16em">
        Julia Language
    </a>
    &nbsp; package. To install Configurations,
    please <a href="https://docs.julialang.org/en/v1/manual/getting-started/">open
    Julia's interactive session (known as REPL)</a> and press <kbd>]</kbd> key in the REPL to use the package mode, then type the following command
</p><pre><code class="language-julia hljs">pkg&gt; add Configurations</code></pre><h2 id="Usage"><a class="docs-heading-anchor" href="#Usage">Usage</a><a id="Usage-1"></a><a class="docs-heading-anchor-permalink" href="#Usage" title="Permalink"></a></h2><p>This package provides a macro <code>@option</code> to let you define <code>struct</code>s to represent options/configurations, and serialize between different option/configuration file format.</p><article class="docstring"><header><a class="docstring-binding" id="Configurations.@option" href="#Configurations.@option"><code>Configurations.@option</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@option [alias::String] &lt;struct def&gt;</code></pre><p>Define an option struct type. This will auto-generate methods that parse a given <code>Dict{String}</code> object (the keys must be of type <code>String</code>) into an instance of the struct type you defined. One can use <code>alias</code> string to distinguish multiple possible option type for the same field.</p><div class="admonition is-compat"><header class="admonition-header">Configurations 0.16</header><div class="admonition-body"><p>from v0.16.0 Configurations stops overloading the <code>Base.show</code> method for you, if you need pretty printing of your option types, consider overloading the <code>Base.show(io::IO, mime::MIME, x)</code> method to <code>pprint_struct(io, mime, x)</code> provided by <a href="https://github.com/Roger-luo/GarishPrint.jl">GarishPrint</a></p></div></div><div class="admonition is-compat"><header class="admonition-header">Configurations 0.12</header><div class="admonition-body"><p>from v0.12.0 the field alias feature is removed due to the syntax conflict with field docstring. Please refer to <a href="https://github.com/Roger-luo/Configurations.jl/issues/17">#17</a>.</p></div></div><p><strong>Example</strong></p><p>One can define option type via <code>@option</code> macro with or without an alias.</p><pre><code class="language-julia-repl hljs">julia&gt; &quot;Option A&quot;
       @option &quot;option_a&quot; struct OptionA
           name::String
           int::Int = 1
       end

julia&gt; &quot;Option B&quot;
       @option &quot;option_b&quot; struct OptionB
           opt::OptionA = OptionA(;name = &quot;Sam&quot;)
           float::Float64 = 0.3
       end</code></pre><p>and convert a dict to an option type via <a href="#Configurations.from_dict-Union{Tuple{T}, Tuple{Type{T}, AbstractDict{String, V} where V}} where T"><code>from_dict</code></a>.</p><pre><code class="language-julia-repl hljs">julia&gt; d = Dict{String, Any}(
           &quot;opt&quot; =&gt; Dict{String, Any}(
               &quot;name&quot; =&gt; &quot;Roger&quot;,
               &quot;int&quot; =&gt; 2,
           ),
           &quot;float&quot; =&gt; 0.33
       );

julia&gt; option = from_dict(OptionB, d)
OptionB(;
    opt = OptionA(;
        name = &quot;Roger&quot;,
        int = 2,
    ),
    float = 0.33,
)</code></pre><p>when there are multiple possible option type for one field, one can use the alias to distinguish them</p><pre><code class="language-julia-repl hljs">julia&gt; @option struct OptionD
           opt::Union{OptionA, OptionB}
       end

julia&gt; d1 = Dict{String, Any}(
               &quot;opt&quot; =&gt; Dict{String, Any}(
                   &quot;option_b&quot; =&gt; d
               )
           );

julia&gt; from_dict(OptionD, d1)
OptionD(;
    opt = OptionB(;
        opt = OptionA(;
            name = &quot;Roger&quot;,
            int = 2,
        ),
        float = 0.33,
    ),
)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Roger-luo/Configurations.jl">source</a></section></article><h2 id="Frequently-Asked-Questions"><a class="docs-heading-anchor" href="#Frequently-Asked-Questions">Frequently Asked Questions</a><a id="Frequently-Asked-Questions-1"></a><a class="docs-heading-anchor-permalink" href="#Frequently-Asked-Questions" title="Permalink"></a></h2><ul><li><em>When should I use this package?</em></li></ul><p>When you have a lot settings/preferences/keyword arguments for a package or a function, or you need to validate a JSON schema, a REST API for your web server. A similar package in Python is <a href="https://pydantic-docs.helpmanual.io/">pydantic</a> in Python, but this package only provides the basic feature, a pydantic compatible package will be developed in the future in <a href="https://github.com/Roger-luo/KungIChi.jl">KungIChi</a>.</p><p>A common type of code is instead of writing many keyword arguments, like <code>foo(;kw_a=1, kw_b=2, kw_c, ...)</code>, wrap them in an option type</p><pre><code class="language-julia hljs">@option struct FooOptions
    kw_a::Int = 1
    kw_b::Int = 2
    # ...
end

foo(x, y;kw...) = foo(x, y, FooOptions(;kw...))
foo(x, y, options::FooOptions) = #= actual implementation =#</code></pre><p>this will make your keyword argument easy to read and serialize with readable markup language like TOML.</p><ul><li><em>Why Configurations only supports TOML?</em></li></ul><p>This is not true, Configurations supports converting a dictionary type (subtype of <code>AbstractDict{String}</code>) to option types defined by <a href="#Configurations.@option"><code>@option</code></a>. The reason why TOML is supported by default is because Julia is shipped with a TOML parser already, so <strong>we can support TOML without adding extra dependency</strong>. And depending on other format parsers such as <code>YAML</code>, <code>JSON</code> etc. will cause an extra loading latency that is not necessary for most of the users who is fine with just TOML. </p><p>On the other hand, <code>Configurations</code> aims to be lightweight because it is used by latency sensitive packages like <a href="https://comonicon.org/">Comonicon</a>. We will put other features into <a href="https://github.com/Roger-luo/KungIChi.jl">KungIChi</a> in the future (it is still work-in-progress).</p><ul><li><em>Why do you need an <a href="#Configurations.@option"><code>@option</code></a> macro?</em></li></ul><p>the <a href="#Configurations.@option"><code>@option</code></a> macro provides the functionality of reflection in compile time, e.g we support type alias and default value reflection. These feature is not implementable without macros.</p><ul><li><em>Why not just use a supertype but a macro?</em></li></ul><p>besides the reason in the previous question, for a specific project, we can write a supertype and implement a set of generic interface, which is fine. But as a package, we need to make things composable and generic, thus, we do not want to block users from defining their own supertype. In this package, we use traits instead of supertypes, this makes things composable, e.g you can use the <a href="https://github.com/fonsp/Pluto.jl/blob/main/src/Configuration.jl">option types defined in Pluto</a> as part of your own option types.</p><ul><li><em>What is the difference between this package and <a href="https://github.com/JuliaPackaging/Preferences.jl">Preferences</a></em></li></ul><p>Preferences aims to provide a mechanism of reading package preferences that works with the package manager <a href="http://pkg.julialang.org/">Pkg</a>, but this package aims to provide a mechnism to read a setting/preference to Julia structs. Thus these two are completely orthogonal packages and they can work together.</p><ul><li><em>What is the difference between this package and <a href="https://github.com/JuliaData/StructTypes.jl">StructTypes</a></em></li></ul><p>StructTypes is mainly used to provide a standard interface to parse dict-like data to a Julia struct via traits to make parsing faster, but this package aims to support the mapping between a dict-like data and a specific kind of Julia struct defined by <code>@option</code> which provides limited semantic that is not as general as a normal Julia struct (it is closer to <code>Base.@kwdef</code> semantic). And we have plans of supporting StructTypes traits by default once <a href="https://github.com/JuliaData/StructTypes.jl/issues/53">JuliaData/StructTypes#53</a> is figured out.</p><h2 id="License"><a class="docs-heading-anchor" href="#License">License</a><a id="License-1"></a><a class="docs-heading-anchor-permalink" href="#License" title="Permalink"></a></h2><p>MIT License</p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="quick-start/">Quick Start »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.7 on <span class="colophon-date" title="Saturday 9 October 2021 07:01">Saturday 9 October 2021</span>. Using Julia version 1.6.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
